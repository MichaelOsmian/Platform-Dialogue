<domain>
	       <settings>
                <modules>opendial.plugins.NuanceSpeech</modules>
                <id>NMDPTRIAL_chairithinug_wisc_edu20171030172526</id>
                <key>09e2e4351f5aa7b809f5a8926c385a14b48ace2defd67dd23ff551071b111825f3fd5a125701cb61f773f363ab4d775fd7468dc61c0a985cffe9631bfb7c40ee</key>
                <lang>eng-USA</lang>
        </settings>

	<initialstate>
	<variable id="u_m">
		<value prob="1">Hello! What is your name?</value>
	</variable>

	</initialstate>
	
	<!--<model trigger="u_u">
	<rule>
		<case>
			<condition>
				<if var="u_name" relation="in" value="[Mew, Mike, Ruiqi, Bilge]"/>
				<if var="u_u" relation="contains" value="{u_name}"/>
			</condition>
			<effect prob="1">
			<set var="u_m" value="Nice to meet you, {u_name}."/>
			</effect>
		</case>
	</rule>
	</model>-->
	
<model trigger="u_u">
	<rule>
		<case>
			<condition>
				<if var="u_name" relation="in" value="[Mew, Mike, Ruiqi, Bilge]"/>	<!-- Name array -->
				<if var="u_u" relation="contains" value="{u_name} (name)?"/>
			</condition>
			<effect prob="1">
				<set var="a_u" value="Username({u_name})"/>
			</effect>
		</case>
		<case>
			<condition>
				<if var="tasks" relation="in" value="[work, study, learn, sleep, play]"/>
				<if var="u_u" relation="contains" value="{tasks}"/>
			</condition>
			<effect prob="1">
				<set var="a_u" value="Settime({tasks}})"/>
			</effect>
		</case>
	</rule>	
</model>

<model trigger="a_u">
	<rule>
		<case>
			<condition>
				<if var="a_u" relation="=" value="Username({u_name})"/>
			</condition>
			<effect util="1">
				<set var="a_m" value="Recognized({u_name})"/>
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" relation="=" value="Settime({tasks})"/>
			</condition>
			<effect util="1">
				<set var="a_m" value="Settimer({tasks})"/>
			</effect>
		</case>
	</rule>
</model>

<model trigger="a_m">
	<rule>
		<case>
			<condition>
				<if var="a_m" relation="=" value="Recognized({u_name})"/>
			</condition>
			<effect util="1">
				<set var="u_m" value="Nice to meet you, {u_name}. What can I do for you?"/>
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" relation="=" value="Settimer({tasks})"/>
			</condition>
			<effect util="1">
				<set var="u_m" value="Ok, set the timer for the tasks."/>
			</effect>
		</case>
	</rule>
</model>

</domain>
